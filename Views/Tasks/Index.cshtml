@model IEnumerable<ToDoList_MVC.Models.TaskItem>

@{
	ViewData["Title"] = "Your Tasks";
}

<div class="conteiner my-5">

	<h1 class="text-center mb-4 shadow-sm">To-Do List</h1>

	<form asp-action="Add" method="post" asp-controller="Tasks" class="d-flex justify-content-center mb-4 align-items-center p-3 rounded">
		<input name="title" class="form-control w-50 me-2" placeholder="Type your Task" autocomplete="off" required />
		<button type="submit" class="btn btn-primary bg-primary border-0 bg-opacity-75 d-flex rounded align-items-center justify-content-center">
			<span class="fs-6">✚</span>
		</button>
	</form>

	<div class="d-flex flex-column gap-3">
		@foreach(var task in Model)
		{
			var done = task.IsCompleted ? "text-decoration-line-through text-muted" : "";

			var statusText = task.IsCompleted ? "Completed" : "Pending";
			var statusColor = task.IsCompleted ? "bg-success" : "bg-warning";
			var statusBorder = task.IsCompleted ? "border-success" : "border-warning";

			<div class="d-flex align-items-center justify-content-between mx">

				<div class="d-flex align-items-center"> 
					<form asp-action="ToggleComplete" method="post" asp-controller="Tasks" class="me-3 ms-4">
						<input type="hidden" name="id" value="@task.Id">
						<input type="checkbox" class="form-check-input" onchange="this.form.submit()" @(task.IsCompleted ? "checked" : "")/>
					</form>
					<span class="fs-6 ms-4 @done opacity-75">@task.Title</span>
				</div>

				<div class="d-flex align-items-center"> 
					
					<div class="border-status py-1 px-2 bg-opacity-50 @statusBorder @statusColor">
						<span class="fs-6 opacity-75"> @statusText</span>
					</div>

					<form asp-action="Delete" method="post" asp-controller="Tasks" onsubmit="return confirm('Tem certeza?');">
						@Html.AntiForgeryToken()
						<input type="hidden" name="id" value="@task.Id" />
						<button type="submit" class="btn text-danger fs-3 opacity-75 mb-1">⊗</button>
					</form>

				</div>

			</div>
		}
	</div>
</div>

